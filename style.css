@import url('https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;600;700;800&display=swap');

*{
  box-sizing:border-box;
}

body{
  margin:0;
  min-height:100vh;
  font-family:"Be Vietnam Pro",system-ui;

  background:
    linear-gradient(rgba(90,0,0,.55),rgba(120,0,0,.85)),
    url("https://files.catbox.moe/lca24i.jpg");
  background-size:cover;
  background-position:center;
  background-repeat:no-repeat;

  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}

/* ================= LỒNG ĐÈN ================= */
.lanterns{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:200px;
  pointer-events:none;
  z-index:20;
}

.lantern{
  position:absolute;
  top:45px;
  width:64px;
  height:88px;
  background:
    radial-gradient(circle at 50% 25%,#fff6c9,#ff4d4d 35%,#b71c1c 75%);
  border-radius:16px 16px 26px 26px;
  box-shadow:
    0 0 30px rgba(255,120,120,.95),
    0 0 60px rgba(255,60,60,.85),
    0 25px 40px rgba(0,0,0,.65);
  animation:
    swing 5s ease-in-out infinite,
    glow 2.5s ease-in-out infinite;
}

.lantern::before{
  content:"";
  position:absolute;
  top:-60px;
  left:50%;
  width:3px;
  height:60px;
  background:linear-gradient(#ffd54f,#ffb300);
  transform:translateX(-50%);
}

.lantern::after{
  content:"";
  position:absolute;
  bottom:-20px;
  left:50%;
  width:6px;
  height:20px;
  background:#ffd54f;
  border-radius:0 0 6px 6px;
  transform:translateX(-50%);
  box-shadow:0 0 12px rgba(255,215,0,.9);
}

.lantern:nth-child(1){ left:18%; animation-duration:5.5s }
.lantern:nth-child(2){ left:50%; animation-duration:4.2s }
.lantern:nth-child(3){ left:82%; animation-duration:6s }

@keyframes swing{
  0%,100%{ transform:rotate(-5deg) }
  50%{ transform:rotate(7deg) }
}
@keyframes glow{
  0%,100%{ filter:brightness(1) }
  50%{ filter:brightness(1.35) }
}

/* ================= KIM TUYẾN ================= */
.confetti{
  position:fixed;
  top:-10%;
  width:5px;
  height:14px;
  background:linear-gradient(135deg,#fff9c4,#ffd54f,#ffb300);
  border-radius:2px;
  opacity:.95;
  pointer-events:none;
  z-index:6;
  box-shadow:
    0 0 6px rgba(255,215,0,.9),
    0 0 14px rgba(255,193,7,.6);
  animation:
    confettiFall linear forwards,
    confettiSpin linear infinite;
}
@keyframes confettiFall{ to{ top:115% } }
@keyframes confettiSpin{ to{ transform:rotate(360deg) } }

/* ================= HOA ĐÀO ================= */
.petals{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:4;
}

.petal{
  position:absolute;
  top:-15%;
  width:18px;
  height:18px;
  background:radial-gradient(circle,#ffe4ec,#f48fb1,#ec407a);
  border-radius:0 70% 70% 70%;
  filter:drop-shadow(0 4px 6px rgba(0,0,0,.35));
  animation:
    fall linear forwards,
    sway ease-in-out infinite,
    spin linear infinite;
}
@keyframes fall{ to{ top:120% } }
@keyframes sway{
  0%,100%{ transform:translateX(0) rotate(0) }
  50%{ transform:translateX(70px) rotate(25deg) }
}
@keyframes spin{ to{ rotate:360deg } }

/* ================= BOX ================= */
.box{
  position:relative;
  z-index:10;
  width:92%;
  max-width:540px;
  padding:30px 22px 36px;
  text-align:center;
  color:#fff;
  background:linear-gradient(180deg,rgba(255,255,255,.22),rgba(255,255,255,.08));
  backdrop-filter:blur(14px);
  border-radius:26px;
  box-shadow:
    0 30px 60px rgba(0,0,0,.45),
    inset 0 0 0 1px rgba(255,255,255,.15);
}

.box h1{
  margin:0;
  font-weight:800;
}

#status{
  margin-top:10px;
  opacity:.9;
}

/* ================= ENVELOPES ================= */
.envelopes{
  display:flex;
  justify-content:space-between;
  gap:14px;
  margin-top:30px;
}

.envelope{
  position:relative;
  width:96px;
  height:156px;
  cursor:pointer;
  transition:.45s cubic-bezier(.25,.8,.25,1);
}

.envelope:hover{
  transform:translateY(-8px) scale(1.06);
  filter:brightness(1.1);
}

/* ===== PHONG BAO ===== */
.env-body{
  position:absolute;
  inset:0;
  border-radius:22px;
  background:
    radial-gradient(circle at 30% 20%,rgba(255,215,120,.45),transparent 40%),
    radial-gradient(circle at 70% 80%,rgba(255,215,120,.35),transparent 45%),
    linear-gradient(180deg,#ff4d4d,#d32f2f,#b71c1c);
  border:3px solid #ffd54f;
  box-shadow:
    0 18px 36px rgba(0,0,0,.45),
    inset 0 0 0 1px rgba(255,255,255,.25),
    inset 0 -8px 16px rgba(0,0,0,.25);
  overflow:hidden;
}

.env-body::before{
  content:"";
  position:absolute;
  inset:10px;
  border-radius:18px;
  background:
    repeating-linear-gradient(
      45deg,
      rgba(255,215,0,.08),
      rgba(255,215,0,.08) 6px,
      transparent 6px,
      transparent 14px
    );
  opacity:.35;
}

.env-body::after{
  content:"LÌ XÌ";
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:26px;
  font-weight:800;
  letter-spacing:2px;
  color:#ffd54f;
  text-shadow:
    0 2px 4px rgba(0,0,0,.6),
    0 0 14px rgba(255,215,0,.85);
  transition:.35s ease;
}

.envelope.opened .env-body::after{
  opacity:0;
  transform:scale(.7);
}

/* ===== KẾT QUẢ LÌ XÌ (FIX TRÀN) ===== */
.gift{
  position:absolute;
  inset:12px;
  display:flex;
  align-items:center;
  justify-content:center;

  padding:12px;
  text-align:center;

  font-size:clamp(14px, 4vw, 20px);
  font-weight:800;
  line-height:1.35;

  color:#ffeb3b;

  opacity:0;
  transform:scale(.7);
  transition:.45s ease;

  word-break:break-word;
  overflow-wrap:anywhere;
  white-space:normal;

  max-height:100%;
  overflow:hidden;

  text-shadow:
    0 3px 8px rgba(0,0,0,.6),
    0 0 18px rgba(255,215,0,.7);
}

.envelope.opened .gift{
  opacity:1;
  transform:scale(1);
}

/* ================= BAO Ở GIỮA + LẮC ================= */
.envelope.center{
  position:fixed;
  inset:0;
  margin:auto;
  z-index:9999;
  transform:scale(1.6);
  filter:drop-shadow(0 30px 60px rgba(0,0,0,.7));
}

.envelope.fade{
  opacity:.2;
  filter:blur(2px);
  pointer-events:none;
}

@keyframes shakeEnvelope{
  0%{ transform:scale(1.6) rotate(0) }
  25%{ transform:scale(1.6) rotate(-4deg) }
  50%{ transform:scale(1.6) rotate(4deg) }
  75%{ transform:scale(1.6) rotate(-3deg) }
  100%{ transform:scale(1.6) rotate(0) }
}

.envelope.shake{
  animation:shakeEnvelope .6s ease;
}

/* ================= RESET ================= */
.reset-btn{
  position:fixed;
  top:16px;
  left:16px;
  padding:10px 22px;
  border:none;
  border-radius:999px;
  font-weight:800;
  color:#b71c1c;
  background:linear-gradient(#fffde7,#ffd54f);
  box-shadow:0 10px 24px rgba(0,0,0,.35);
  z-index:10000;
  }
